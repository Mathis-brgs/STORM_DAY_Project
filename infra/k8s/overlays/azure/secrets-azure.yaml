# ==============================================================================
# SECRETS AZURE — À remplir avec les vraies valeurs
# ==============================================================================
#
# IMPORTANT : Ce fichier contient des placeholders.
# Remplace les valeurs avant de déployer sur AKS.
#
# Valeurs à récupérer depuis Terraform :
#   cd infra/terraform/environments/dev
#   terraform output
#
# Alternative plus sécurisée : Azure Key Vault + External Secrets Operator
#   https://external-secrets.io/latest/provider/azure-key-vault/
#
# ==============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: azure-credentials
  namespace: storm
type: Opaque
stringData:
  # Azure Database for PostgreSQL (Flexible Server)
  # Valeur fournie par : terraform output postgres_host
  PG_HOST: "REPLACE_WITH_TERRAFORM_OUTPUT"          # storm-db.postgres.database.azure.com
  PG_USERNAME: "storm_admin"
  PG_PASSWORD: "REPLACE_WITH_REAL_PASSWORD"

  # Azure Cache for Redis
  # Valeur fournie par : terraform output redis_host
  REDIS_URL: "rediss://REPLACE_WITH_TERRAFORM_OUTPUT:6380"
  REDIS_PASSWORD: "REPLACE_WITH_REDIS_ACCESS_KEY"

  # Azure Blob Storage (compatible S3 — via MinIO SDK ou Azure SDK)
  # Valeur fournie par : terraform output storage_account_name
  AZURE_STORAGE_ACCOUNT: "REPLACE_WITH_STORAGE_ACCOUNT"
  AZURE_STORAGE_KEY: "REPLACE_WITH_STORAGE_KEY"
  AZURE_BLOB_ENDPOINT: "https://REPLACE_WITH_STORAGE_ACCOUNT.blob.core.windows.net"
  AZURE_BLOB_CONTAINER: "storm-media"

  # JWT Secret (générer avec: openssl rand -hex 32)
  JWT_SECRET: "REPLACE_WITH_GENERATED_SECRET"