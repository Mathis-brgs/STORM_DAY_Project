# ==============================================================================
# SECRETS AZURE - À remplir avec les vraies valeurs
# ==============================================================================
#
# IMPORTANT : Ce fichier contient des placeholders.
# Remplace les valeurs avant de déployer sur Azure.
#
# Les valeurs viennent des outputs Terraform :
#   tofu output postgresql_host
#   tofu output redis_connection_string
#   tofu output storage_account_name
#
# Alternative plus sécurisée : Azure Key Vault + External Secrets Operator
#
# ==============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: azure-credentials
  namespace: storm
type: Opaque
stringData:
  # PostgreSQL Flexible Server (valeurs fournies par tofu output)
  DB_HOST:     "REPLACE_WITH_TOFU_OUTPUT_postgresql_host"   # storm-postgresql-dev.postgres.database.azure.com
  DB_PORT:     "5432"
  DB_USER:     "storm_admin"
  DB_PASSWORD: "REPLACE_WITH_REAL_PASSWORD"
  DB_NAME:     "storm"

  # Azure Cache for Redis (valeur fournie par tofu output)
  REDIS_URL: "redis://REPLACE_WITH_TOFU_OUTPUT_redis_hostname:6379"

  # JWT Secret (générer avec: openssl rand -hex 32)
  JWT_SECRET: "REPLACE_WITH_GENERATED_SECRET"

  # Azure Blob Storage (pour le media service)
  AZURE_STORAGE_ACCOUNT:   "REPLACE_WITH_TOFU_OUTPUT_storage_account_name"  # ex: stormdev
  AZURE_STORAGE_KEY:       "REPLACE_WITH_STORAGE_ACCESS_KEY"
  AZURE_AVATARS_CONTAINER: "avatars"
  AZURE_MEDIA_CONTAINER:   "media"
