apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards-services
  namespace: storm
data:
  gateway-ws.json: |
    {"title":"STORM — Gateway / WebSocket","uid":"storm-gateway-ws","description":"Monitoring Gateway HTTP + WebSocket. Goroutines = proxy connexions WS.","schemaVersion":42,"refresh":"5s","time":{"from":"now-15m","to":"now"},"timezone":"browser","tags":["storm","gateway","websocket"],"templating":{"list":[{"name":"datasource","type":"datasource","pluginId":"prometheus","label":"Datasource","hide":0,"refresh":1}]},"panels":[{"id":1,"type":"row","title":"Santé & État","gridPos":{"x":0,"y":0,"w":24,"h":1},"collapsed":false},{"id":2,"type":"stat","title":"Gateway UP","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"mappings":[{"type":"value","options":{"1":{"text":"UP","color":"green"},"0":{"text":"DOWN","color":"red"}}}],"thresholds":{"mode":"absolute","steps":[{"value":0,"color":"red"},{"value":1,"color":"green"}]}}},"targets":[{"expr":"up{job=\"gateway\"}","refId":"A"}]},{"id":3,"type":"stat","title":"Goroutines (WS)","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":4,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[{"value":0,"color":"blue"},{"value":500,"color":"yellow"},{"value":1000,"color":"orange"}]}}},"targets":[{"expr":"go_goroutines{job=\"gateway\"}","refId":"A"}]},{"id":4,"type":"stat","title":"Mémoire RSS","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":8,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"bytes","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":209715200,"color":"yellow"},{"value":419430400,"color":"red"}]}}},"targets":[{"expr":"process_resident_memory_bytes{job=\"gateway\"}","refId":"A"}]},{"id":5,"type":"stat","title":"CPU %","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"percent","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":50,"color":"yellow"},{"value":80,"color":"red"}]}}},"targets":[{"expr":"rate(process_cpu_seconds_total{job=\"gateway\"}[1m]) * 100","refId":"A"}]},{"id":6,"type":"row","title":"Performance","gridPos":{"x":0,"y":5,"w":24,"h":1},"collapsed":false},{"id":7,"type":"timeseries","title":"Goroutines (connexions WebSocket actives)","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":6,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":15,"spanNulls":true}}},"targets":[{"expr":"go_goroutines{job=\"gateway\"}","legendFormat":"goroutines","refId":"A"}]},{"id":8,"type":"timeseries","title":"CPU & Mémoire","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":6,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}},"overrides":[{"matcher":{"id":"byName","options":"CPU %"},"properties":[{"id":"unit","value":"percent"}]},{"matcher":{"id":"byName","options":"Mémoire RSS"},"properties":[{"id":"unit","value":"bytes"}]}]},"targets":[{"expr":"rate(process_cpu_seconds_total{job=\"gateway\"}[1m]) * 100","legendFormat":"CPU %","refId":"A"},{"expr":"process_resident_memory_bytes{job=\"gateway\"}","legendFormat":"Mémoire RSS","refId":"B"}]},{"id":9,"type":"row","title":"NATS — Flux de messages","gridPos":{"x":0,"y":14,"w":24,"h":1},"collapsed":false},{"id":10,"type":"timeseries","title":"NATS — Messages par seconde","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":15,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}}},"targets":[{"expr":"rate(gnatsd_varz_in_msgs[1m])","legendFormat":"msgs entrants/s","refId":"A"},{"expr":"rate(gnatsd_varz_out_msgs[1m])","legendFormat":"msgs sortants/s","refId":"B"}]},{"id":11,"type":"timeseries","title":"NATS — Connexions & Abonnements","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":15,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"points","pointSize":5,"lineWidth":2,"fillOpacity":10,"spanNulls":true}}},"targets":[{"expr":"gnatsd_varz_connections","legendFormat":"connexions NATS","refId":"A"},{"expr":"gnatsd_varz_subscriptions","legendFormat":"subscriptions","refId":"B"}]}]}

  messages.json: |
    {"title":"STORM — Message Service","uid":"storm-messages","description":"Monitoring Message Service. Le service n'expose pas de /metrics — métriques NATS utilisées comme proxy.","schemaVersion":42,"refresh":"5s","time":{"from":"now-15m","to":"now"},"timezone":"browser","tags":["storm","messages","nats"],"templating":{"list":[{"name":"datasource","type":"datasource","pluginId":"prometheus","label":"Datasource","hide":0,"refresh":1}]},"panels":[{"id":1,"type":"row","title":"Santé","gridPos":{"x":0,"y":0,"w":24,"h":1},"collapsed":false},{"id":2,"type":"stat","title":"Message Service UP","description":"Toujours DOWN — pas de serveur HTTP. Ajouter promhttp dans message/cmd/main.go pour activer.","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"mappings":[{"type":"value","options":{"1":{"text":"UP","color":"green"},"0":{"text":"DOWN — pas de /metrics","color":"orange"}}}],"thresholds":{"mode":"absolute","steps":[{"value":0,"color":"orange"},{"value":1,"color":"green"}]}}},"targets":[{"expr":"up{job=\"message\"}","refId":"A"}]},{"id":3,"type":"stat","title":"NATS msgs entrants","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":4,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"short","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"blue"}]}}},"targets":[{"expr":"gnatsd_varz_in_msgs","refId":"A"}]},{"id":4,"type":"stat","title":"NATS msgs sortants","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":8,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"short","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"blue"}]}}},"targets":[{"expr":"gnatsd_varz_out_msgs","refId":"A"}]},{"id":5,"type":"stat","title":"Subscriptions NATS","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"short","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"}]}}},"targets":[{"expr":"gnatsd_varz_subscriptions","refId":"A"}]},{"id":6,"type":"row","title":"Throughput NATS","gridPos":{"x":0,"y":5,"w":24,"h":1},"collapsed":false},{"id":7,"type":"timeseries","title":"Messages / seconde","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":6,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":15,"spanNulls":true}}},"targets":[{"expr":"rate(gnatsd_varz_in_msgs[1m])","legendFormat":"msgs entrants/s","refId":"A"},{"expr":"rate(gnatsd_varz_out_msgs[1m])","legendFormat":"msgs sortants/s","refId":"B"}]},{"id":8,"type":"timeseries","title":"Débit bytes NATS","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":6,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"bytes","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}}},"targets":[{"expr":"rate(gnatsd_varz_in_bytes[1m])","legendFormat":"bytes entrants/s","refId":"A"},{"expr":"rate(gnatsd_varz_out_bytes[1m])","legendFormat":"bytes sortants/s","refId":"B"}]},{"id":9,"type":"row","title":"Slow Consumers & Santé NATS","gridPos":{"x":0,"y":14,"w":24,"h":1},"collapsed":false},{"id":10,"type":"timeseries","title":"Slow Consumers (retard traitement)","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":15,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"points","pointSize":6,"lineWidth":2,"spanNulls":true},"thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":1,"color":"red"}]}}},"targets":[{"expr":"gnatsd_varz_slow_consumers","legendFormat":"slow consumers","refId":"A"}]},{"id":11,"type":"timeseries","title":"Connexions NATS","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":15,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"points","pointSize":5,"lineWidth":2,"spanNulls":true}}},"targets":[{"expr":"gnatsd_varz_connections","legendFormat":"connexions NATS actives","refId":"A"}]}]}

  auth.json: |
    {"title":"STORM — Auth / User Service","uid":"storm-auth","description":"Monitoring User Service (NestJS). Métriques process si prom-client exposé.","schemaVersion":42,"refresh":"5s","time":{"from":"now-15m","to":"now"},"timezone":"browser","tags":["storm","auth","user"],"templating":{"list":[{"name":"datasource","type":"datasource","pluginId":"prometheus","label":"Datasource","hide":0,"refresh":1}]},"panels":[{"id":1,"type":"row","title":"Santé & État","gridPos":{"x":0,"y":0,"w":24,"h":1},"collapsed":false},{"id":2,"type":"stat","title":"User Service UP","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"mappings":[{"type":"value","options":{"1":{"text":"UP","color":"green"},"0":{"text":"DOWN","color":"red"}}}],"thresholds":{"mode":"absolute","steps":[{"value":0,"color":"red"},{"value":1,"color":"green"}]}}},"targets":[{"expr":"up{job=\"user\"}","refId":"A"}]},{"id":3,"type":"stat","title":"Mémoire RSS","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":4,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"bytes","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":268435456,"color":"yellow"},{"value":536870912,"color":"red"}]}}},"targets":[{"expr":"process_resident_memory_bytes{job=\"user\"}","refId":"A"}]},{"id":4,"type":"stat","title":"CPU %","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":8,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"percent","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":50,"color":"yellow"},{"value":80,"color":"red"}]}}},"targets":[{"expr":"rate(process_cpu_seconds_total{job=\"user\"}[1m]) * 100","refId":"A"}]},{"id":5,"type":"stat","title":"FDs ouverts","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"short","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":500,"color":"yellow"},{"value":1000,"color":"red"}]}}},"targets":[{"expr":"process_open_fds{job=\"user\"}","refId":"A"}]},{"id":6,"type":"row","title":"Performance Auth (NestJS)","gridPos":{"x":0,"y":5,"w":24,"h":1},"collapsed":false},{"id":7,"type":"timeseries","title":"CPU & Mémoire — User Service","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":6,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}},"overrides":[{"matcher":{"id":"byName","options":"CPU %"},"properties":[{"id":"unit","value":"percent"}]},{"matcher":{"id":"byName","options":"Mémoire RSS"},"properties":[{"id":"unit","value":"bytes"}]}]},"targets":[{"expr":"rate(process_cpu_seconds_total{job=\"user\"}[1m]) * 100","legendFormat":"CPU %","refId":"A"},{"expr":"process_resident_memory_bytes{job=\"user\"}","legendFormat":"Mémoire RSS","refId":"B"}]},{"id":8,"type":"timeseries","title":"Heap NestJS (prom-client)","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":6,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"bytes","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}}},"targets":[{"expr":"nodejs_heap_size_used_bytes{job=\"user\"}","legendFormat":"Heap utilisé","refId":"A"},{"expr":"nodejs_heap_size_total_bytes{job=\"user\"}","legendFormat":"Heap total","refId":"B"}]},{"id":9,"type":"row","title":"NATS — Auth flow","gridPos":{"x":0,"y":14,"w":24,"h":1},"collapsed":false},{"id":10,"type":"timeseries","title":"NATS — Messages/s (auth.validate)","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":15,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}}},"targets":[{"expr":"rate(gnatsd_varz_in_msgs[1m])","legendFormat":"msgs NATS/s","refId":"A"}]}]}

  notifications.json: |
    {"title":"STORM — Notification Service","uid":"storm-notifications","description":"Monitoring Notification Service (Go + Redis + NATS).","schemaVersion":42,"refresh":"5s","time":{"from":"now-15m","to":"now"},"timezone":"browser","tags":["storm","notification","redis"],"templating":{"list":[{"name":"datasource","type":"datasource","pluginId":"prometheus","label":"Datasource","hide":0,"refresh":1}]},"panels":[{"id":1,"type":"row","title":"Santé & État","gridPos":{"x":0,"y":0,"w":24,"h":1},"collapsed":false},{"id":2,"type":"stat","title":"Notification Service UP","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"none","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"mappings":[{"type":"value","options":{"1":{"text":"UP","color":"green"},"0":{"text":"DOWN","color":"red"}}}],"thresholds":{"mode":"absolute","steps":[{"value":0,"color":"red"},{"value":1,"color":"green"}]}}},"targets":[{"expr":"up{job=\"notification\"}","refId":"A"}]},{"id":3,"type":"stat","title":"Goroutines","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":4,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"short","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":100,"color":"yellow"},{"value":500,"color":"red"}]}}},"targets":[{"expr":"go_goroutines{job=\"notification\"}","refId":"A"}]},{"id":4,"type":"stat","title":"Mémoire RSS","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":8,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"bytes","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":134217728,"color":"yellow"},{"value":268435456,"color":"red"}]}}},"targets":[{"expr":"process_resident_memory_bytes{job=\"notification\"}","refId":"A"}]},{"id":5,"type":"stat","title":"CPU %","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":1,"w":4,"h":4},"options":{"colorMode":"background","graphMode":"area","reduceOptions":{"calcs":["lastNotNull"]}},"fieldConfig":{"defaults":{"unit":"percent","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":30,"color":"yellow"},{"value":60,"color":"red"}]}}},"targets":[{"expr":"rate(process_cpu_seconds_total{job=\"notification\"}[1m]) * 100","refId":"A"}]},{"id":6,"type":"row","title":"Performance Go Runtime","gridPos":{"x":0,"y":5,"w":24,"h":1},"collapsed":false},{"id":7,"type":"timeseries","title":"Goroutines","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":6,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":15,"spanNulls":true}}},"targets":[{"expr":"go_goroutines{job=\"notification\"}","legendFormat":"goroutines","refId":"A"}]},{"id":8,"type":"timeseries","title":"Mémoire Go Heap","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":6,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"bytes","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}}},"targets":[{"expr":"go_memstats_alloc_bytes{job=\"notification\"}","legendFormat":"Heap alloué","refId":"A"},{"expr":"go_memstats_sys_bytes{job=\"notification\"}","legendFormat":"Sys total","refId":"B"}]},{"id":9,"type":"row","title":"NATS — Flux Notifications","gridPos":{"x":0,"y":14,"w":24,"h":1},"collapsed":false},{"id":10,"type":"timeseries","title":"NATS msgs/s (notification.send, message.sent)","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":0,"y":15,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"short","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}}},"targets":[{"expr":"rate(gnatsd_varz_in_msgs[1m])","legendFormat":"msgs entrants/s","refId":"A"},{"expr":"rate(gnatsd_varz_out_msgs[1m])","legendFormat":"msgs sortants/s","refId":"B"}]},{"id":11,"type":"timeseries","title":"GC Go — Durée & Fréquence","datasource":{"type":"prometheus","uid":"${datasource}"},"gridPos":{"x":12,"y":15,"w":12,"h":8},"options":{"legend":{"displayMode":"table","placement":"bottom","calcs":["mean","max","lastNotNull"]},"tooltip":{"mode":"multi"}},"fieldConfig":{"defaults":{"unit":"s","custom":{"drawStyle":"line","lineWidth":2,"fillOpacity":10,"spanNulls":true}}},"targets":[{"expr":"rate(go_gc_duration_seconds_sum{job=\"notification\"}[1m])","legendFormat":"durée GC/s","refId":"A"},{"expr":"rate(go_gc_duration_seconds_count{job=\"notification\"}[1m])","legendFormat":"nb GC/s","refId":"B"}]}]}
